!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6e9e8eed-89c3-48b0-952b-bd802b7fe03e",e._sentryDebugIdIdentifier="sentry-dbid-6e9e8eed-89c3-48b0-952b-bd802b7fe03e")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5850],{13535:function(e,n,r){"use strict";r.d(n,{K:function(){return s},LZ:function(){return u},TI:function(){return a},X5:function(){return i},h0:function(){return o},nQ:function(){return c}});var t=r(11527),c=function(e){var n=e.color;return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,t.jsx)("path",{d:"M3.29395 6.99994L5.76465 9.81335L10.7061 4.18652",stroke:void 0===n?"currentColor":n,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})},o=function(){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M8.65448 3.1785C8.92354 3.17854 9.14156 3.39678 9.14178 3.6658V8.47733C9.14178 8.74653 8.92368 8.96458 8.65448 8.96463C8.38534 8.96451 8.16718 8.74649 8.16718 8.47733V4.83182L3.61639 9.3826C3.426 9.57287 3.11728 9.57294 2.92694 9.3826C2.73666 9.19225 2.73669 8.88351 2.92694 8.69315L7.46698 4.15311H3.84296C3.57372 4.15311 3.35565 3.93504 3.35565 3.6658C3.35587 3.39675 3.57386 3.1785 3.84296 3.1785H8.65448Z",fill:"currentColor"})})},a=function(){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.33333 9.33333V12H0V2.66667H2.66667V0H12V9.33333H9.33333ZM10.6667 1.33333H4V2.66667H9.33333V8H10.6667V1.33333ZM1.33333 4H8V10.6667H1.33333V4Z",fill:"currentColor"})})},i=function(){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,t.jsx)("path",{d:"M3.24884 7.99982C3.24884 9.25978 3.74961 10.4682 4.64044 11.3592C5.53092 12.2497 6.7386 12.7492 7.99786 12.7498C9.34047 12.7447 10.6292 12.2221 11.5945 11.2889L11.8045 11.0789H10.409V9.73907H13.4207C13.7906 9.73907 14.0904 10.0392 14.0906 10.409V13.4207H12.7508V12.0272L12.534 12.244L12.5262 12.2527C11.3122 13.4263 9.6912 14.0843 8.00275 14.0906H7.99982C6.38461 14.0905 4.83538 13.4495 3.69318 12.3074C2.55093 11.1651 1.909 9.61525 1.909 7.99982H3.24884ZM7.99982 1.909C9.6153 1.909 11.1651 2.55087 12.3074 3.69318C13.4496 4.8354 14.0915 6.38452 14.0916 7.99982H12.7518C12.7517 6.73991 12.251 5.53137 11.3602 4.64044C10.4693 3.74958 9.26066 3.249 8.00079 3.24884C6.65893 3.25439 5.37092 3.77813 4.40607 4.71075L4.19611 4.92072H5.59064V6.26056H2.57892C2.20891 6.26053 1.909 5.96065 1.909 5.59064V2.57892H3.24884V3.97345L3.47443 3.74786C4.68838 2.5743 6.30941 1.91536 7.99786 1.909H7.99982Z",fill:"currentColor"})})},u=function(){return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M4.0094 3.22168C3.81414 3.41694 3.81414 3.73352 4.0094 3.92879L6.18947 6.10886L4.07189 8.22644C3.87663 8.4217 3.87663 8.73829 4.07189 8.93355L4.42544 9.2871C4.6207 9.48236 4.93729 9.48236 5.13255 9.2871L7.96098 6.45867C8.15624 6.26341 8.15624 5.94683 7.96098 5.75157L7.60742 5.39801C7.5899 5.38049 7.5714 5.36455 7.55211 5.35017L5.07006 2.86813C4.8748 2.67286 4.55822 2.67286 4.36296 2.86813L4.0094 3.22168Z",fill:"currentColor"})})},s=function(){return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:[(0,t.jsx)("g",{"clip-path":"url(#clip0_3619_21469)",children:(0,t.jsx)("path",{d:"M1.3939 3.33657L6.07295 8.01563L10.7289 3.35972",stroke:"white","stroke-width":"1.2"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_3619_21469",children:(0,t.jsx)("rect",{width:"12",height:"12",fill:"white",transform:"translate(12) rotate(90)"})})})]})}},40158:function(e,n,r){"use strict";var t=r(45166),c=r(98703),o=r(11040),a=r(11527),i=r(45223),u=r(45928),s=r.n(u);n.Z=function(e){var n=e.children,r=e.className,u=e.type,l=e.danger,d=(0,o._)(e,["children","className","type","danger"]);return(0,a.jsx)(i.ZP,(0,c._)((0,t._)({},d),{className:"".concat(s().btn," ").concat(r," ").concat(s()[void 0===u?"default":u]," ").concat(l?s().danger:""),children:n}))}},65728:function(e,n,r){"use strict";var t=r(45166),c=r(98703),o=r(11527);r(50959);var a=r(6190),i=r(43765),u=r.n(i),s=function(){return(0,o.jsx)("div",{className:"cursor-pointer hover:bg-[#F7F8FA] rounded-[4px] h-[24px]",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20",fill:"none",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.9197 5.91998C13.7245 5.72472 13.4079 5.72472 13.2126 5.91998L10.1209 9.01174L6.90728 5.79812C6.71201 5.60286 6.39543 5.60286 6.20017 5.79812L5.84662 6.15167C5.65135 6.34694 5.65135 6.66352 5.84662 6.85878L9.06022 10.0724L5.84868 13.284C5.65342 13.4792 5.65342 13.7958 5.84868 13.9911L6.20223 14.3446C6.3975 14.5399 6.71408 14.5399 6.90934 14.3446L10.1209 11.1331L13.2106 14.2228C13.4058 14.418 13.7224 14.418 13.9177 14.2228L14.2712 13.8692C14.4665 13.6739 14.4665 13.3574 14.2712 13.1621L11.1815 10.0724L14.2733 6.98064C14.4686 6.78538 14.4686 6.4688 14.2733 6.27353L13.9197 5.91998Z",fill:"#5F5F5F"})})})};n.Z=function(e){var n=e.className,r=e.title,i=e.open,l=e.handleCancel,d=e.children,_=e.customCloseIcon;return(0,o.jsx)(a.Z,(0,c._)((0,t._)({centered:!0,open:i,width:"400px",zIndex:1200,closeIcon:null,destroyOnClose:!0,onCancel:l,wrapClassName:"".concat(u().modal," ").concat(n)},e),{title:(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-[16px] font-[500]",children:r}),(0,o.jsx)("div",{onClick:l,children:_||(0,o.jsx)(s,{})})]}),children:d}))}},5024:function(e,n,r){"use strict";r.d(n,{Gu:function(){return s},QQ:function(){return c},Vi:function(){return l}});var t,c,o,a,i=r(29122),u=r(18163);(t=c||(c={})).CURRENT="current",t.NEXT="next",t.SUBSCRIBE="subscribe",t.UPGRADE="upgrade",t.DOWNGRADE="downgrade",t.CHANGE="change",t.NOT_ALLOWED="not_allowed";var s=(o={},(0,i._)(o,u.EL.CodePlanStarter,"适合入门级开发场景满足基础开发需求"),(0,i._)(o,u.EL.CodePlanPlus,"适合专业开发场景满足复杂开发任务需求"),(0,i._)(o,u.EL.CodePlanMax,"适合有高级开发场景满足大量编程辅助需求"),o),l=(a={},(0,i._)(a,u.wJ.Month,"每月，按月订阅"),(0,i._)(a,u.wJ.Year,"每年，按年订阅"),a)},35226:function(e,n,r){"use strict";r.d(n,{B:function(){return o},G:function(){return c}});var t=r(10371);function c(e){var n=e.orderId,r=e.purchaseId,c=e.price,o=e.title,a=encodeURIComponent("pages/index/index?orderId=".concat(n,"&purchaseId=").concat(r,"&env=").concat(t.Zp,"&price=").concat(c,"&title=").concat(o));return"alipays://platformapi/startapp?appId=".concat("2021006105673598","&page=").concat(a)}function o(e){return e/100}},84138:function(e,n,r){"use strict";r.d(n,{wW:function(){return c}});var t=r(18163),c=function(e){switch(e){case t.wJ.Month:return"月";case t.wJ.Quarter:return"季";case t.wJ.Year:return"年";default:return""}}},80974:function(e,n,r){"use strict";r.d(n,{J:function(){return I},R:function(){return S}});var t,c,o=r(58177),a=r(29122),i=r(45166),u=r(98703),s=r(11040),l=r(96583),d=r(18163),_=r(7711),p=r(5367),h=r(483),f=r(50959),b=r(23972),g=r(48072),y=r(5024),m=r(75224),C=r(61176),v=r(52442),w=r(45979),x=r(35226),L=r(22653),k=r(37639),M=r(26919),E=r(5726),P=r.n(E),N=(t={},(0,a._)(t,d.EL.CodePlanStarter,1),(0,a._)(t,d.EL.CodePlanPlus,2),(0,a._)(t,d.EL.CodePlanMax,3),t),H=(c={},(0,a._)(c,d.wJ.Month,1),(0,a._)(c,d.wJ.Quarter,2),(0,a._)(c,d.wJ.Year,3),c),R=function(e){switch(e){case y.QQ.UPGRADE:return w.RV.Upgrade;case y.QQ.DOWNGRADE:return w.RV.Downgrade;case y.QQ.CHANGE:return w.RV.Change;case y.QQ.NEXT:return w.RV.Next;default:return w.RV.None}},S=function(e){var n=e.currentComboType,r=e.targetComboType,t=e.currentCycleType,c=e.targetCycleType,o=e.nextComboType,a=e.nextCycleType;if(!n||!t)return y.QQ.SUBSCRIBE;if(n===r&&t===c)return o||a?y.QQ.CURRENT:y.QQ.NEXT;var i=N[n]||0,u=N[r]||0,s=H[t]||0,l=H[c]||0;return n===r&&t!==c?t>c?y.QQ.NOT_ALLOWED:y.QQ.UPGRADE:(n!==r&&t===c||n!==r&&t!==c&&l>s)&&u>i?y.QQ.UPGRADE:y.QQ.NOT_ALLOWED},Q=function(e){var n,r="".concat(window.location.origin,"/user-center/payment/coding-plan"),t="".concat(window.location.origin).concat(window.location.pathname),c=new URLSearchParams({package_type:e.title||"",price:(null===(n=e.price_data)||void 0===n?void 0:n.price_tag)||"",cycle_type:String(e.cycle_type||"")});return{success_url:"".concat(r,"?type=SUCCESS&").concat(c.toString()),cancel_url:"".concat(t,"?type=FAIL&").concat(c.toString())}},T=function(e){var n=Q(e),r=n.success_url,t=n.cancel_url;return{combo_id:e.combo_id,purchase_channel:g.xZ.AliPay,biz_line:g.Kk.Openplatform,combo_type:e.combo_type,success_url:r,cancel_url:t}},I=function(){var e,n,r,t,c,a=(0,p.T)(),y=(0,m.useRouter)(),E=(0,f.useRef)(null),N=(0,k.v9)(function(e){return e.subscription.paymentQRCodeData}),H=(0,p.C)(function(e){return e.auth.isAuthenticated}),Q=(0,k.v9)(function(e){return e.subscription.subscribeModalType}),I=(0,k.v9)(function(e){return e.subscription.showPaymentQRCodeModal}),j=(0,p.C)(function(e){return e.codingPlan}),V=j.loading,B=j.currentSubscribe,J=j.cycleType,D=V.subscribePackages,Z=V.cancelSubscription,A=V.downgradeCombo,U=V.payCombo,G=!!(null==B?void 0:B.curr_subscribe_combo_id),O=(0,f.useCallback)((0,o._)(function(){var e,n,r,t,c,o,i,u=arguments;return(0,l.Jh)(this,function(s){switch(s.label){case 0:e=u.length>0&&void 0!==u[0]?u[0]:J,s.label=1;case 1:if(s.trys.push([1,6,7,8]),a((0,h.E1)(!0)),!H)return[3,3];return[4,(0,_.ig)({biz_line:g.Kk.Openplatform,cycle_type:e,resource_package_type:d.vo.CodePlan})];case 2:return r=(n=s.sent()).cycle_resource_packages,t=n.current_subscribe,c=n.current_combo_card,a((0,h._S)(r)),a((0,h.Zz)(t)),a((0,h.G)(c)),[2,t];case 3:return[4,(0,_.Ib)({cycle_type:e,biz_line:g.Kk.Openplatform,resource_package_type:d.vo.CodePlan})];case 4:return o=s.sent().cycle_resource_packages,a((0,h._S)(o)),a((0,h.Zz)(void 0)),a((0,h.G)(void 0)),[2];case 5:return[3,8];case 6:return i=s.sent(),a((0,h._S)([])),console.error("获取订阅页面信息错误:",i),[3,8];case 7:return a((0,h.E1)(!1)),[7];case 8:return[2]}})}),[a,J,H]),F=(0,L.Z)(function(){E.current&&(clearInterval(E.current),E.current=null)}),K=(0,L.Z)((0,o._)(function(){var e,n,r,t;return(0,l.Jh)(this,function(c){switch(c.label){case 0:if(!I&&Q===w.RV.None)return F(),[2];return[4,(0,_.ig)({biz_line:g.Kk.Openplatform,cycle_type:J,resource_package_type:d.vo.CodePlan})];case 1:return n=(e=c.sent()).cycle_resource_packages,r=e.current_subscribe,t=e.current_combo_card,(null==N?void 0:N.combo_id)&&(null==r?void 0:r.curr_subscribe_combo_id)===(null==N?void 0:N.combo_id)&&(r.curr_subscribe_combo_id!==(null==B?void 0:B.curr_subscribe_combo_id)||r.current_subscribe_end_time!==(null==B?void 0:B.current_subscribe_end_time))&&(a((0,h._S)(n)),a((0,h.Zz)(r)),a((0,h.G)(t)),a((0,w.KB)(!1)),a((0,w.y_)(w.RV.None)),a((0,w.L9)(!1)),a((0,w.kd)()),F(),y.push("/user-center/payment/coding-plan","/user-center/payment/coding-plan")),[2]}})})),z=(0,f.useCallback)((e=(0,o._)(function(e){var n,r,t,c,o,i,u,s,_,p,f,g,y;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(U)return[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),a((0,h.Ul)(!0)),n=T(e),[4,(0,b.VY)(n)];case 2:return(null==(r=l.sent())?void 0:r.charge_id)&&(null==r?void 0:r.purchase_id)&&(null==r?void 0:r.pay_amount)&&((null==r?void 0:r.change_preview)?(o=(c=r.change_preview).current_subscribe,i=c.target_subscribe,u=c.refund_amount,s=c.pay_amount,_=c.lose_benefit,p=c.target_renew_date,f=S({currentComboType:o.combo_type,currentCycleType:o.cycle_type,targetComboType:i.combo_type,targetCycleType:i.cycle_type,nextComboType:null==B?void 0:B.next_subscribe_combo_type,nextCycleType:null==B?void 0:B.next_subscribe_cycle_type}),a((0,w.O3)({currentSubscribe:o,targetSubscribe:i,refundAmount:u,payAmount:s,loseBenefit:_,targetRenewDate:p})),a((0,w.qP)({orderId:r.charge_id,purchaseId:r.purchase_id,combo_id:e.combo_id,price:(0,x.B)(r.pay_amount),title:"升级订阅".concat(e.title||"","套餐-连续").concat(e.cycle_type===d.wJ.Month?"包月":"包年"),showNextMonthHint:!!(e.combo_type===d.EL.CodePlanStarter&&e.cycle_type===d.wJ.Month),originalPrice:(null===(t=e.price_data)||void 0===t?void 0:t.original_price_tag)&&(0,M.uf)(e.price_data.original_price_tag)||void 0})),g=R(f),a((0,w.y_)(g)),g!==w.RV.None&&(a((0,w.L9)(!0)),E.current=setInterval(function(){K()},5e3))):(a((0,w.KB)(!0)),a((0,w.qP)({orderId:r.charge_id,purchaseId:r.purchase_id,combo_id:e.combo_id,price:(0,x.B)(r.pay_amount),title:"订阅".concat(e.title||"","套餐-连续").concat(e.cycle_type===d.wJ.Month?"包月":"包年"),showNextMonthHint:!!(e.combo_type===d.EL.CodePlanStarter&&e.cycle_type===d.wJ.Month),originalPrice:(null===(y=e.price_data)||void 0===y?void 0:y.original_price_tag)&&(0,M.uf)(e.price_data.original_price_tag)||void 0})),E.current=setInterval(function(){K()},5e3))),[3,5];case 3:return console.error("订阅错误:",l.sent()),[3,5];case 4:return a((0,h.Ul)(!1)),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),[U,a]),W=(0,f.useCallback)((n=(0,o._)(function(e){var n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(A)return[2];r.label=1;case 1:return r.trys.push([1,4,5,6]),a((0,h.Eg)(!0)),n=T(e),[4,(0,b.No)(n)];case 2:return r.sent(),[4,O()];case 3:return r.sent(),[3,6];case 4:return console.error("订阅错误:",r.sent()),[3,6];case 5:return a((0,h.Eg)(!1)),[7];case 6:return[2]}})}),function(e){return n.apply(this,arguments)}),[A,a,O]),q=(0,f.useCallback)((r=(0,o._)(function(e){return(0,l.Jh)(this,function(n){switch(n.label){case 0:if(Z)return[2];n.label=1;case 1:return n.trys.push([1,4,5,6]),a((0,h.Ui)(!0)),[4,(0,_.DO)({combo_id:e,auto_purchase_type:d.JC.AutoPurchaseTypeCycle})];case 2:return n.sent(),[4,O()];case 3:return n.sent(),[3,6];case 4:return console.error("取消订阅错误:",n.sent()),[3,6];case 5:return a((0,h.Ui)(!1)),[7];case 6:return[2]}})}),function(e){return r.apply(this,arguments)}),[Z,a,O]),X=(0,f.useCallback)((t=(0,o._)(function(e){return(0,l.Jh)(this,function(n){switch(n.label){case 0:return a((0,h.dF)(e)),[4,O(e)];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),[a,O]),Y=(0,f.useCallback)(function(){if(y.isReady){var e=y.query,n=e.type,r=e.package_type,t=e.price,c=(0,s._)(e,["type","package_type","price"]);if(n){var o=function(e){(0,C.I)({id:"coding_plan_purchase_result",result_type:e,package_type:r,price:t})};switch(n){case"SUCCESS":o("success"),(0,v.Kb)("purchase successful");break;case"FAIL":o("fail"),(0,v.Kb)("purchase failed","error")}y.replace({pathname:y.pathname,query:c},void 0,{shallow:!0})}}},[y.isReady,y.query]),$=function(e,n){var r=P()(e).format("HH:mm"),t=P()(n).format("HH:mm");return"".concat(r,"-").concat(t,"(UTC+8)")},ee=function(e){var n=Math.floor(e/1e3),r=Math.floor(n/3600),t=Math.floor(n%3600/60);return r>0?"".concat(r," 小时").concat(t>0?" ".concat(t," 分钟"):"","后重置"):"".concat(t," 分钟后重置")};return{isSubscribe:G,subscribePackagesLoading:D,cancelSubscriptionLoading:Z,fetchSubscribePage:O,handleSubscribe:z,handleCancel:q,handleChangeCycleType:X,handlePurchaseCallback:Y,handleDowngrade:W,fetchCodingPlanRemains:(0,f.useCallback)((c=(0,o._)(function(e){var n,r,t,c,o,a,s,d,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,_.sk)(e)];case 1:if(!(n=l.sent())||!n.model_remains||0===n.model_remains.length)return[2,void 0];return t=(r=n.model_remains[0]).current_interval_total_count,c=r.current_interval_usage_count,o=r.start_time,a=r.end_time,s=r.remains_time,d=t-c,p=0===t?0:Math.round(d/t*100),[2,(0,u._)((0,i._)({},n),{timeRange:$(o,a),remainsTimeText:ee(s),usageData:{total:t,remaining:c,used:d,percent:p,isFull:0===c}})];case 2:return console.error("获取 Coding Plan 剩余额度信息错误:",l.sent()),[2,void 0];case 3:return[2]}})}),function(e){return c.apply(this,arguments)}),[])}}},26919:function(e,n,r){"use strict";r.d(n,{$U:function(){return c},FB:function(){return t},uf:function(){return o}});var t=function(e,n){return e&&n?Math.round((1-Number(n)/Number(e))*100):0},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/(\d+(\.\d+)?)/;if(!e)return null;var r=e.match(n);return r?r[0]:null},o=function(e){return null==e?null:Number(e).toLocaleString()}},45928:function(e){e.exports={btn:"MButton_btn__hrQTP",default:"MButton_default__p_mFH",primary:"MButton_primary__bNJd8",danger:"MButton_danger__Mi9Es"}},43765:function(e){e.exports={modal:"MModal_modal__GGukm",modalHeader:"MModal_modalHeader__dihpF"}}}]);